// Validate
script(type='text/javascript', src='/javascripts/forms.js')

.row-fluid
  //.span6.offset2 TODO when bs fixes
  //.span6.center-content
  .center-content.width50
    .content-box.box-with-shadow
      form#uploadForm.form-horizontal.center-content(method='post', enctype="multipart/form-data", action='/transcriptions.json')
        fieldset
          legend Upload a Poster
          //a(href='/Multiupload') New, multi-pdf uploader!
          .control-group
            label.control-label(for='title') Title
            .controls
              input#uploadTitle.required.input(name='transcription[title]', value='', type='text', minlength='3')
          .control-group
            label.control-label Description
            .controls
             textarea(name='transcription[description]', default='').
          .control-group
            label.control-label Picture
            .controls
              input(type='file', name='transcription[file]', accept='pdf', onchange='readUrl(this);')
              img(id="imgPreview", src="#")
          #uploadDisclaimer
            | By Uploading, you agree to our
            a(href='/about') terms and conditions

          .actions
            input.btn.btn-primary(type='submit', value='Upload')
            button.btn(type='reset') Cancel

script(type='text/javascript')
  $(function() {
    console.log("AAA");
    window.readUrl = function(input) {
      if (input.files && input.files[0]) {
        var reader = new FileReader();
        reader.onload = function (e) {
          $('#imgPreview').attr('src', e.target.result);
        }
        reader.readAsDataURL(input.files[0]);
      }
    }
  })
