// Generated by CoffeeScript 1.3.1
(function() {
  var EmailView, User, signup, user;

  User = Backbone.Model.extend({
    validate: function(attrs) {
      if (attrs.email) {
        if (!attrs.email.length < 3) {
          return 'Invalid Email';
        }
      }
    }
  });

  user = new User();

  EmailView = Backbone.View.extend({
    initialize: function() {
      _.bindAll(this, 'contentChanged');
      return this.render();
    },
    render: function() {
      var template;
      template = _.template($('#emailTemplate').html(), {});
      return $(this.el).html(template);
    },
    events: {
      "click input[type=submit]": "submitEmail",
      "change input.content": "contentChanged"
    },
    validateEmail: function(email) {
      var lcEmail, re;
      re = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
      lcEmail = email.toLowerCase();
      return re.test(email) && ((lcEmail.indexOf('brown.edu') > -1) || (lcEmail.indexOf('risd.edu') > -1));
    },
    submitEmail: function(event) {
      var displayText;
      event.preventDefault();
      displayText = '';
      if (this.validateEmail($("#emailForm > input").val())) {
        displayText = 'Valid Email!';
      } else {
        displayText = 'Invalid Email!';
      }
      return $('#display').html(displayText);
    },
    contentChanged: function(event) {
      return console.log(event, event.currentTarget);
    }
  });

  $('#uploadForm').hide();

  signup = new EmailView({
    el: $('#signupContainer')
  });

}).call(this);
